---
layout: single
title:  "Docker#01"
---



# 도커#01  


## 도커란 ?
Go 언어로 작성된 리눅스 컨테이너를 기반으로 하는 오픈소스 가상화 플랫폼으로
특정한 서비스를 패키징하고 배포하는데 유용한 오픈소스 프로그램이다.  
  
![image](https://github.com/hojunleesunsin/hojunleesunsin.github.io/assets/113594859/d5438fe9-02f7-48e9-b92f-2f22b4fab47f)
  

컨테이너는 라이브러리, 시스템 도구, 런타임, 코드 등 소프트웨어를 실행하는데 필요한 모든것을 포함하고 있다.   
가상 머신에 비해 필요한 것들로만 구동되기 때문에 이미지를 만들 경우에 용량이 줄어들어 훨씬 가볍다.

## 도커를 사용해야 하는 이유?
**독립적인 개발환경을 보장한다**  
서버를 할당받아 설정할 때에 OS, 라이브러리, 컴파일러, 패키지 등등 많은 설정이 요구되지만 서버 설정을 도커 컨테이너에서 진행하게되면, 도커 컨테이너에 여러 소프트웨어를 설치하고, 설정을 변경해도 호스트 OS에는 영향을 주지 않는다.  

**개발, 운영 환경을 통합해준다**  
컨테이너 안에서 작업한 후에 배포를 하려고 할때, 컨테이너 내에서 작업을 '도커 이미지'로 일종의 패키지로 만들어서 서버에 전달한다.  
이러한 프로세스를 거치게 되면 배포 서버와 개발 서버 모두 동일한 환경에서 애플리케이션 운영이 가능해진다. 또한 각 관계자들은 테스트, 운영, 개발을 할때에 문제점을 명확하게 파악 할 수 있다.  

**이 외에도 더 많은 소프트웨어를 더 빨리 제공해주고 운영을 표준화 시켜주고 비용을 절감시켜주는 다양한 장점이 있기때문에 도커를 사용해야한다.**

## 도커 이미지와 도커 컨테이너의 차이
![image](https://github.com/hojunleesunsin/hojunleesunsin.github.io/assets/113594859/58567ab8-99ff-4362-a46f-9bed3ea70da7)

**도커 이미지**  
이미지는 컨테이너를 생성하는 파일같은 템플릿으로 각각 독립적으로 실행된다.  
  
**도커 컨테이너**  
컨테이너란 이미지를 실행한 상태로 응용프로그램의 종속성과 함께 응용프로그램 자체를 
패키징 Or 캡슐화하여 격리된 공간에서 프로세스를 동작시키는 기술이다.

## 도커 파일
도커 파일은 **이미지 생성 출발점**으로 이미지를 구성하기 위한 명령어들을 작성하여 이미지를 구성할 수 있다.  
도커 파일은 이미지에 대한 정보를 기술한 **템플릿**이라고 보면 된다.  
  
도커 파일을 빌드하면 이미지가 자동으로 생성되므로 도커 파일을 통해 애플리케이션 빌드 및 배포를 자동화할 수 있다.  
```dockerfile
FROM node:14

WORKDIR /app
COPY package*.json ./

RUN npm install
COPY . /app

CMD [ "node", "index.js" ]
EXPOSE 3000
```  
도커 파일은 위와 같이 작성할 수 있다.

**FROM** : base image 지정 , 이미지의 기초  
**RUN** : command를 실행하여 새 이미지에 포함시킴 -> apk 설치 등등 / 이미지 빌드 시   
**CMD** : 컨테이너가 시작 될 때 실행할 command 지정 / 빌드 완료 된 이미지로 부터 시작  
**ENTRYPOINT** : 컨테이너 시작 시 실행될 command 지정 + param 변경 불가  
**LABEL** : key-value 형식으로 작성된 메타데이터를 이미지에 추가  
**ENV** : key-value 형식으로  환경변수를 설정  
**EXPOSE** : 컨테이너로 들어오는 트래픽을 특정 포트로 받아들일 수 있도록 지정하는 역할 -> <포트>/<프로토콜>    
**COPY** : Host내에 있는 파일 또는 디렉토리를 컨테이너의 파일시스템으로 복사  
**ADD** : 파일 또는 디렉토리를 컨테이너로 복사 -> remote 파일, 디렉토리를 복사 할 수 있음  
**USER** :  명령을 실행할 유저명, 유저 그룹 설정 -> 사용자계정으로 변경  
**WORKDIR** : 작업 디렉토리 설정 / 기존 디렉토리 없을 때 생성 후 설정  
**VOLUME** : 컨테이너내의 특정 디렉토리를 컨테이너 외부 경로에 마운트 시켜주는 지시자 -> 데이터 보존  
